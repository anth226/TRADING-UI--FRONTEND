import React, { FC, useMemo } from 'react';
import { ScaleContinuousNumeric } from 'd3';

interface Props {
  xScale: ScaleContinuousNumeric<number, number>
  yScale: ScaleContinuousNumeric<number, number>
  xAccessor: any
  datum: any
}

const UserMark: FC<Props> = ({
  yScale, datum, xScale, xAccessor, 
}) => {
  const y = useMemo(() => yScale(datum.close) - 50, [datum, yScale]);
  const x = useMemo(() => xScale(xAccessor(datum)), [datum, xAccessor, xScale]);
  
  return (
    <svg width="71" height="50" viewBox="0 0 71 50" fill="none" xmlns="http://www.w3.org/2000/svg" x={x} y={y}>
      <rect width="71" height="27.1616" rx="13.5808" fill="#59648A" />
      <path d="M28.2387 17.3386C28.5614 17.3386 28.7887 17.2689 28.9207 17.1296C29.06 16.9902 29.1297 16.7446 29.1297 16.3926V8.95656H30.5377V16.7006C30.5377 17.3459 30.3837 17.8152 30.0757 18.1086C29.7677 18.4019 29.3277 18.5486 28.7557 18.5486H28.3597L28.2387 17.3386ZM34.3718 16.7666C33.7925 16.7666 33.2901 16.6382 32.8648 16.3816C32.4395 16.1249 32.1131 15.7802 31.8858 15.3476C31.6585 14.9149 31.5448 14.4382 31.5448 13.9176C31.5448 13.3969 31.6585 12.9166 31.8858 12.4766C32.1131 12.0366 32.4395 11.6882 32.8648 11.4316C33.2901 11.1749 33.7925 11.0466 34.3718 11.0466C34.9512 11.0466 35.4535 11.1749 35.8788 11.4316C36.3041 11.6882 36.6305 12.0366 36.8578 12.4766C37.0852 12.9166 37.1988 13.3969 37.1988 13.9176C37.1988 14.4382 37.0852 14.9149 36.8578 15.3476C36.6305 15.7802 36.3041 16.1249 35.8788 16.3816C35.4535 16.6382 34.9512 16.7666 34.3718 16.7666ZM34.3718 15.6446C34.8191 15.6446 35.1675 15.4869 35.4168 15.1716C35.6735 14.8562 35.8018 14.4382 35.8018 13.9176C35.8018 13.3896 35.6735 12.9679 35.4168 12.6526C35.1675 12.3299 34.8191 12.1686 34.3718 12.1686C33.9245 12.1686 33.5725 12.3299 33.3158 12.6526C33.0665 12.9679 32.9418 13.3896 32.9418 13.9176C32.9418 14.4382 33.0665 14.8562 33.3158 15.1716C33.5725 15.4869 33.9245 15.6446 34.3718 15.6446ZM40.9203 11.0686C41.6023 11.0686 42.1193 11.2959 42.4713 11.7506C42.8233 12.2052 42.9993 12.8176 42.9993 13.5876V16.6566H41.6353V13.6976C41.6353 13.1842 41.5473 12.8066 41.3713 12.5646C41.2026 12.3152 40.9276 12.1906 40.5463 12.1906C40.1283 12.1906 39.7836 12.3482 39.5123 12.6636V16.6566H38.1483V11.1566H39.4243L39.4463 11.5416C39.9083 11.2262 40.3996 11.0686 40.9203 11.0686ZM49.1083 8.80256C49.6363 8.80256 50.102 8.92356 50.5053 9.16556C50.9086 9.40023 51.2203 9.7339 51.4403 10.1666C51.6603 10.5992 51.7703 11.1016 51.7703 11.6736C51.7703 12.4216 51.598 13.1292 51.2533 13.7966C50.916 14.4566 50.487 15.0286 49.9663 15.5126C49.4456 15.9966 48.9103 16.3779 48.3603 16.6566L47.3813 15.8866C47.8873 15.6372 48.4153 15.2779 48.9653 14.8086C49.5226 14.3392 49.937 13.8112 50.2083 13.2246C49.8416 13.4666 49.3833 13.5876 48.8333 13.5876C48.408 13.5876 48.023 13.4886 47.6783 13.2906C47.3336 13.0926 47.0623 12.8176 46.8643 12.4656C46.6736 12.1136 46.5783 11.7139 46.5783 11.2666C46.5783 10.7826 46.681 10.3536 46.8863 9.97956C47.0916 9.60556 47.385 9.3159 47.7663 9.11056C48.1476 8.90523 48.595 8.80256 49.1083 8.80256ZM49.0863 12.3776C49.4383 12.3776 49.728 12.2676 49.9553 12.0476C50.1826 11.8276 50.2963 11.5489 50.2963 11.2116C50.2963 10.8742 50.1826 10.5919 49.9553 10.3646C49.728 10.1299 49.4383 10.0126 49.0863 10.0126C48.7416 10.0126 48.452 10.1299 48.2173 10.3646C47.99 10.5919 47.8763 10.8742 47.8763 11.2116C47.8763 11.5489 47.99 11.8276 48.2173 12.0476C48.452 12.2676 48.7416 12.3776 49.0863 12.3776ZM53.8111 10.9476C53.5031 11.1529 53.1804 11.2849 52.8431 11.3436L52.7221 10.1556C52.9641 10.1042 53.2354 9.95756 53.5361 9.71556C53.8367 9.46623 54.0384 9.21323 54.1411 8.95656H55.2191V16.6566H53.8111V10.9476ZM57.8716 10.9476C57.5636 11.1529 57.2409 11.2849 56.9036 11.3436L56.7826 10.1556C57.0246 10.1042 57.2959 9.95756 57.5966 9.71556C57.8973 9.46623 58.0989 9.21323 58.2016 8.95656H59.2796V16.6566H57.8716V10.9476Z" fill="white" />
      <path d="M13.564 23.8965C19.1027 23.8965 23.5926 19.3385 23.5926 13.7159C23.5926 8.09335 19.1027 3.53535 13.564 3.53535C8.02536 3.53535 3.5354 8.09335 3.5354 13.7159C3.5354 19.3385 8.02536 23.8965 13.564 23.8965Z" fill="#F0F0F0" />
      <path d="M13.1279 13.7165H23.5926C23.5926 12.7976 23.4719 11.9075 23.2471 11.0607H13.1279V13.7165Z" fill="#D80027" />
      <path d="M13.1279 8.40517H22.1206C21.5067 7.38823 20.7218 6.48936 19.8066 5.74936H13.1279V8.40517Z" fill="#D80027" />
      <path d="M13.5639 23.8979C15.9242 23.8979 18.0935 23.0697 19.8066 21.6847H7.32129C9.03438 23.0697 11.2037 23.8979 13.5639 23.8979Z" fill="#D80027" />
      <path d="M5.00732 19.0278H22.1207C22.6135 18.2114 22.9958 17.319 23.2471 16.372H3.88086C4.13224 17.319 4.51446 18.2114 5.00732 19.0278Z" fill="#D80027" />
      <path d="M8.18084 5.12519H9.09474L8.24466 5.75213L8.56937 6.76657L7.71933 6.13963L6.86929 6.76657L7.14978 5.89021C6.40131 6.52311 5.7453 7.26462 5.20469 8.09084H5.49752L4.95641 8.48991C4.8721 8.63267 4.79125 8.77771 4.71376 8.92489L4.97216 9.73221L4.49008 9.37665C4.37024 9.63439 4.26063 9.89793 4.16211 10.167L4.44679 11.0565H5.49752L4.64744 11.6834L4.97216 12.6979L4.12211 12.0709L3.61293 12.4465C3.56196 12.8624 3.5354 13.286 3.5354 13.7159H13.564C13.564 8.09338 13.564 7.43053 13.564 3.53535C11.5829 3.53535 9.7361 4.11875 8.18084 5.12519ZM8.56937 12.6979L7.71933 12.0709L6.86929 12.6979L7.194 11.6834L6.34392 11.0565H7.39465L7.71933 10.042L8.04401 11.0565H9.09474L8.24466 11.6834L8.56937 12.6979ZM8.24466 8.71778L8.56937 9.73221L7.71933 9.10528L6.86929 9.73221L7.194 8.71778L6.34392 8.09084H7.39465L7.71933 7.0764L8.04401 8.09084H9.09474L8.24466 8.71778ZM12.1666 12.6979L11.3165 12.0709L10.4665 12.6979L10.7912 11.6834L9.94114 11.0565H10.9919L11.3165 10.042L11.6412 11.0565H12.692L11.8419 11.6834L12.1666 12.6979ZM11.8419 8.71778L12.1666 9.73221L11.3165 9.10528L10.4665 9.73221L10.7912 8.71778L9.94114 8.09084H10.9919L11.3165 7.0764L11.6412 8.09084H12.692L11.8419 8.71778ZM11.8419 5.75213L12.1666 6.76657L11.3165 6.13963L10.4665 6.76657L10.7912 5.75213L9.94114 5.12519H10.9919L11.3165 4.11076L11.6412 5.12519H12.692L11.8419 5.75213Z" fill="#0052B4" />
      <circle cx="35" cy="41" r="9" fill="white" />
      <path d="M41.5 37H28.5L35 47.5L41.5 37Z" fill="#FF0000" />
    </svg>
  );
};

export { UserMark };
